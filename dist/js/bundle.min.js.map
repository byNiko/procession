{"version":3,"sources":["FilterEvents.js","HeaderHover.js","JoinPopup.js","MobileNav.js","menuToggle.js"],"names":["document","querySelectorAll","forEach","item","a","querySelector","src","URL","href","searchParams","append","select","getElementById","addEventListener","e","filterItems","target","value","els","style","display","classList","contains","optionParam","URLSearchParams","window","location","search","get","opt","options","find","op","filterOnLoad","matchMedia","matches","console","log","masthead","subMenus","mH","clientHeight","height","tallest","submenuArr","Array","from","reduce","prev","itt","x","y","Math","max","remove","this","add","closest","openJoinPopup","closePopup","key","popupDisplayed","sessionStorage","getItem","triggers","body","getElementsByTagName","popup","setupWillchange","willChange","removeWillchange","setItem","length","setTimeout","el","siteNavigation","menu","linksWithChildren","link","toggleFocus","event","preventDefault","type","self","tagName","toLowerCase","toggle","parentNode","menuItem","children","isActive","overflowY"],"mappings":"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","file":"bundle.min.js","sourcesContent":["!( () => {\n\t/** add query param to select links */\n\tconst links = document.querySelectorAll( '.queryParam' );\n\tlinks.forEach( item => {\n\t\tconst a = item.querySelector( 'a' );\n\t\tsrc = new URL( a.href );\n\t\tsrc.searchParams.append( 'filter', 'festival' );\n\t\ta.href = src\n\n\t} )\n} )();\n\n\n!( () => {\n\n\tconst select = document.getElementById( \"event-tag-select\" );\n\tif ( !select ) return;\n\n\tselect.addEventListener( 'input', handleFilter );\n\tconst els = document.querySelectorAll( '.event--listing' );\n\tfilterOnLoad();\n\tfunction handleFilter( e ) {\n\n\t\tconst select = e.target.value;\n\n\t\tfilterItems( select )\n\n\t}\n\tfunction filterItems( select ) {\n\t\tels.forEach( item => {\n\t\t\titem.style.display = \"block\";\n\t\t\tif ( select === '' ) return;\n\t\t\tif ( !( item.classList.contains( `event-tag-${select}` ) ) )\n\t\t\t\titem.style.display = \"none\";\n\t\t} )\n\t}\n\tfunction filterOnLoad() {\n\t\tconst optionParam = new URLSearchParams( window.location.search ).get( 'filter' );\n\t\tif ( optionParam ) {\n\t\t\tconst opt = [...select.options].find( op => op.value === optionParam );\n\t\t\tif ( opt ) select.value = opt.value;\n\t\t\tfilterItems( opt.value )\n\t\t}\n\t}\n} )();","!( () => {\n\tconst mediaQuery = window.matchMedia( '(min-width: 40rem)' )\n\t// Check if the media query is true\n\tif ( mediaQuery.matches ) {\n\t\tconsole.log( 'match' )\n\t\tconst masthead = document.getElementById( 'masthead' );\n\t\tconst subMenus = masthead.querySelectorAll( '.sub-menu' );\n\t\tconst mH = masthead.clientHeight;\n\t\tmasthead.style.height = `${mH}px`\n\t\tconst tallest = getTallestSubmenu( subMenus );\n\n\t\tmasthead.addEventListener( 'mouseleave', function ( e ) {\n\t\t\tmasthead.classList.remove( 'is-hovered' )\n\t\t\tthis.style.height = `${mH}px`;\n\t\t} )\n\t\tmasthead.addEventListener( 'mouseenter', function ( e ) {\n\t\t\tmasthead.classList.add( 'is-hovered' );\n\t\t\tthis.style.height = `${mH + tallest}px`;\n\t\t} )\n\t}\n\tfunction getTallestSubmenu( submenuArr ) {\n\t\treturn Array.from( submenuArr ).reduce( ( prev, itt ) => {\n\t\t\tconst x = itt.clientHeight;\n\t\t\tconst y = ( prev && prev.clientHeight ) ? prev.clientHeight : prev || 0;\n\t\t\treturn Math.max( x, y );\n\t\t} )\n\t}\n\n} )();","( () => {\n\t// mark this in sessionStorage\n\tdocument.addEventListener( 'click', handleClick );\n\tdocument.addEventListener( 'keydown', handleKeydown );\n\n\tconst popupDisplayed = sessionStorage.getItem( 'popupDisplayed' );\n\n\tconst triggers = document.querySelectorAll( '.openJoinPopup' );\n\n\tconst body = document.getElementsByTagName( 'body' )[0];\n\tconst popup = document.getElementById( 'joinPopup' );\n\tif ( !popup || !triggers.length ) return;\n\tif ( popupDisplayed !== \"true\" ) {\n\t\tsetTimeout( () => {\n\t\t\topenJoinPopup();\n\t\t}, 5000 )\n\t}\n\n\ttriggers.forEach( ( el ) => {\n\t\tel.addEventListener( 'mouseover', setupWillchange )\n\t\tel.addEventListener( 'touchstart', setupWillchange )\n\t\tel.addEventListener( 'mouseout', removeWillchange )\n\t\tel.addEventListener( 'touchmove', removeWillchange )\n\t} )\n\n\tfunction handleKeydown( e ) {\n\t\te.key === \"Escape\" ? closePopup() : null;\n\t}\n\n\tfunction setupWillchange() {\n\t\tpopup.style.willChange = \"transform, opacity\";\n\t\ttransitionEnd()\n\t}\n\tfunction removeWillchange() {\n\t\tpopup.style.willChange = \"\";\n\t}\n\n\tfunction transitionEnd() {\n\t\tpopup.addEventListener( 'transitionend', removeWillchange )\n\t}\n\n\tfunction handleClick( e ) {\n\n\t\te.target.closest( '.openJoinPopup' ) ? openJoinPopup() : null;\n\t\te.target.closest( '#background-overlay' ) ? closePopup() : null;\n\t\te.target.matches( '.popup--close-button' ) ? closePopup() : null;\n\n\t}\n\tfunction openJoinPopup() {\n\t\t// open popup\n\t\tbody.classList.add( 'overlay--is-active' )\n\t\tpopup.classList.add( 'is-active' )\n\t\tsessionStorage.setItem( \"popupDisplayed\", \"true\" );\n\n\t}\n\n\tfunction closePopup() {\n\t\tpopup.classList.remove( 'is-active' )\n\t\tbody.classList.remove( 'overlay--is-active' )\n\t}\n\tfunction getScrollbarWidth() {\n\t\treturn window.outerWidth - document.body.clientWidth;\n\t}\n\n} )();","\n!( function () {\n\n\tconst siteNavigation = document.getElementById( 'site-navigation' );\n\n\t// Return early if the navigation doesn't exist.\n\tif ( !siteNavigation ) {\n\t\treturn;\n\t}\n\n\tconst menu = siteNavigation.getElementsByTagName( 'ul' )[0];\n\n\n\t// Get all the link elements within the menu.\n\tconst links = menu.getElementsByTagName( 'a' );\n\n\t// Get all the link elements with children within the menu.\n\tconst linksWithChildren = menu.querySelectorAll( '.menu-item-has-children > a, .page_item_has_children > a' );\n\n\tfor ( const link of linksWithChildren ) {\n\t\tlink.addEventListener( 'touchstart', toggleFocus, false );\n\t\tlink.addEventListener( 'click', toggleFocus, false );\n\t\tlink.addEventListener( 'touchstart', toggleFocus, false );\n\t}\n\n\tfunction toggleFocus( event ) {\n\n\t\tevent.preventDefault();\n\t\tif ( event.type === 'focus' || event.type === 'blur' ) {\n\t\t\tlet self = this;\n\t\t\t// Move up through the ancestors of the current link until we hit .nav-menu.\n\t\t\twhile ( !self.classList.contains( 'nav-menu' ) ) {\n\t\t\t\t// On li elements toggle the class .focus.\n\t\t\t\tif ( 'li' === self.tagName.toLowerCase() ) {\n\t\t\t\t\tself.classList.toggle( 'focus' );\n\t\t\t\t}\n\t\t\t\tself = self.parentNode;\n\t\t\t}\n\t\t}\n\n\t\tif ( event.type === 'touchstart' || event.type === 'click' ) {\n\t\t\tconst menuItem = this.parentNode;\n\t\t\tevent.preventDefault();\n\t\t\tfor ( const link of menuItem.parentNode.children ) {\n\t\t\t\tif ( menuItem !== link ) {\n\t\t\t\t\tlink.classList.remove( 'focus' );\n\t\t\t\t}\n\t\t\t}\n\t\t\tmenuItem.classList.toggle( 'focus' );\n\t\t}\n\t}\n\t// Remove the .toggled class and set aria-expanded to false when the user clicks outside the navigation.\n\t// document.addEventListener( 'click', function ( event ) {\n\n\t// \tconst isClickInside = siteNavigation.contains( event.target );\n\n\t// \tif ( !isClickInside ) {\n\t// \t\tsiteNavigation.classList.remove( 'is-active' );\n\t// \t\tbutton.setAttribute( 'aria-expanded', 'false' );\n\t// \t}\n\t// } );\n} )();","( () => {\n\tconst toggle = document.querySelector( '.menu-toggle' );\n\tconst target = document.querySelector( '.main-navigation' );\n\tconst body = document.querySelector( 'body' );\n\n\tif ( !toggle || !target ) return\n\tlet isActive = false;\n\ttoggle.addEventListener( 'click', function toggleMenu( e ) {\n\t\tthis.classList.toggle( 'is-active' )\n\t\ttarget.classList.toggle( 'is-active' );\n\t\tisActive = !isActive;\n\t\tif ( isActive ) {\n\t\t\tbody.style.overflowY = 'hidden';\n\t\t} else {\n\t\t\tbody.style.overflowY = '';\n\t\t}\n\n\n\t} );\n\n} )()"]}