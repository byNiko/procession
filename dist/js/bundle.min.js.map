{"version":3,"sources":["FilterEvents.js","HeaderHover.js","JoinPopup.js","MobileNav.js","menuToggle.js"],"names":["document","querySelectorAll","forEach","item","a","querySelector","src","URL","href","searchParams","append","select","getElementById","addEventListener","e","filterItems","target","value","els","style","display","classList","contains","optionParam","URLSearchParams","window","location","search","get","opt","options","find","op","filterOnLoad","matchMedia","matches","masthead","subMenus","mH","clientHeight","height","tallest","submenuArr","Array","from","reduce","prev","itt","x","y","Math","max","remove","this","add","closest","openJoinPopup","closePopup","key","popupDisplayed","sessionStorage","getItem","triggers","body","getElementsByTagName","popup","setupWillchange","willChange","removeWillchange","setItem","length","setTimeout","el","console","log","parentNode","siteNavigation","menu","linksWithChildren","link","toggleFocus","event","type","self","preventDefault","tagName","toLowerCase","toggle","isActive","overflowY"],"mappings":"AAEAA,SAAAC,iBAAA,eACAC,SAAAC,IACA,MAAAC,EAAAD,EAAAE,cAAA,KACAC,IAAA,IAAAC,IAAAH,EAAAI,MACAF,IAAAG,aAAAC,OAAA,SAAA,YACAN,EAAAI,KAAAF,OAMA,MAEA,MAAAK,EAAAX,SAAAY,eAAA,oBACA,IAAAD,EAAA,OAEAA,EAAAE,iBAAA,SAGA,SAAAC,GAIAC,EAFAD,EAAAE,OAAAC,UAJA,MAAAC,EAAAlB,SAAAC,iBAAA,mBASA,SAAAc,EAAAJ,GACAO,EAAAhB,SAAAC,IACAA,EAAAgB,MAAAC,QAAA,QACA,KAAAT,IACAR,EAAAkB,UAAAC,SAAA,aAAAX,OACAR,EAAAgB,MAAAC,QAAA,aAGA,WACA,MAAAG,EAAA,IAAAC,gBAAAC,OAAAC,SAAAC,QAAAC,IAAA,UACA,GAAAL,EAAA,CACA,MAAAM,EAAA,IAAAlB,EAAAmB,SAAAC,MAAAC,GAAAA,EAAAf,QAAAM,IACAM,IAAAlB,EAAAM,MAAAY,EAAAZ,OACAF,EAAAc,EAAAZ,QArBAgB,IAPA,GCbA,MAGA,GAFAR,OAAAS,WAAA,sBAEAC,QAAA,CACA,MAAAC,EAAApC,SAAAY,eAAA,YACAyB,EAAAD,EAAAnC,iBAAA,aACAqC,EAAAF,EAAAG,aACAH,EAAAjB,MAAAqB,OAAA,GAAAF,MACA,MAAAG,GAWAC,EAXAL,EAYAM,MAAAC,KAAAF,GAAAG,QAAA,CAAAC,EAAAC,KACA,MAAAC,EAAAD,EAAAR,aACAU,EAAAH,GAAAA,EAAAP,aAAAO,EAAAP,aAAAO,GAAA,EACA,OAAAI,KAAAC,IAAAH,EAAAC,OAbAb,EAAAvB,iBAAA,cAAA,SAAAC,GACAsB,EAAAf,UAAA+B,OAAA,cACAC,KAAAlC,MAAAqB,OAAA,GAAAF,SAEAF,EAAAvB,iBAAA,cAAA,SAAAC,GACAsB,EAAAf,UAAAiC,IAAA,cACAD,KAAAlC,MAAAqB,OAAA,GAAAF,EAAAG,SAGA,IAAAC,GAnBA,GCAA,MAEA1C,SAAAa,iBAAA,SAuCA,SAAAC,GAEAA,EAAAE,OAAAuC,QAAA,mBAAAC,IACA1C,EAAAE,OAAAuC,QAAA,wBAAAE,IACA3C,EAAAE,OAAAmB,QAAA,yBAAAsB,OA1CAzD,SAAAa,iBAAA,WAsBA,SAAAC,GACA,WAAAA,EAAA4C,KAAAD,OArBA,MAAAE,EAAAC,eAAAC,QAAA,kBAEAC,EAAA9D,SAAAC,iBAAA,kBAEA8D,EAAA/D,SAAAgE,qBAAA,QAAA,GACAC,EAAAjE,SAAAY,eAAA,aAmBA,SAAAsD,IACAD,EAAA9C,MAAAgD,WAAA,qBAQAF,EAAApD,iBAAA,gBAAAuD,GALA,SAAAA,IACAH,EAAA9C,MAAAgD,WAAA,GAcA,SAAAX,IAEAO,EAAA1C,UAAAiC,IAAA,sBACAW,EAAA5C,UAAAiC,IAAA,aACAM,eAAAS,QAAA,iBAAA,QAIA,SAAAZ,IACAQ,EAAA5C,UAAA+B,OAAA,aACAW,EAAA1C,UAAA+B,OAAA,sBA/CAa,GAAAH,EAAAQ,SACA,SAAAX,GACAY,YAAA,KACAf,MACA,KAGAM,EAAA5D,SAAAsE,IACAA,EAAA3D,iBAAA,YAAAqD,GACAM,EAAA3D,iBAAA,aAAAqD,GACAM,EAAA3D,iBAAA,WAAAuD,GACAI,EAAA3D,iBAAA,YAAAuD,QAtBA,GCCA,WACA3C,OAAAZ,iBAAA,SAAAC,IAAA2D,QAAAC,IAAA,QAAA5D,EAAAE,OAAAF,EAAAE,OAAA2D,eAGA,IAFAlD,OAAAS,WAAA,sBAEAC,QAAA,CACA,MAAAyC,EAAA5E,SAAAY,eAAA,mBAGA,IAAAgE,EACA,OAGA,MAAAC,EAAAD,EAAAZ,qBAAA,MAAA,GAOAc,GAHAD,EAAAb,qBAAA,KAGAa,EAAA5E,iBAAA,6DAEA,IAAA,MAAA8E,KAAAD,EACAC,EAAAlE,iBAAA,aAAAmE,GAAA,GACAD,EAAAlE,iBAAA,QAAAmE,GAAA,GAIA,SAAAA,EAAAC,GAOA,GANA5B,KAAAE,QAAA,aACAkB,QAAAC,IAAA,cAEAD,QAAAC,IAAA,QAGA,UAAAO,EAAAC,KAAA,CAEA,IAAAC,EAAA9B,KAMA,IAJA4B,EAAAG,kBAIAD,EAAA9D,UAAAC,SAAA,cAAA,CAGA,GAFAmD,QAAAC,IAAA,MAAAS,GAEA,OAAAA,EAAAE,QAAAC,cACA,GAAAH,EAAA9D,UAAAC,SAAA,SACA6D,EAAA9D,UAAA+B,OAAA,aACA,CACA,IAAA,MAAA2B,KAAAD,EACAC,EAAAJ,WAAAtD,UAAA+B,OAAA,SAEA+B,EAAA9D,UAAAiC,IAAA,SAIA6B,EAAAA,EAAAR,YAIAM,EAAAC,OA5DA,GCDA,MACA,MAAAK,EAAAvF,SAAAK,cAAA,gBACAW,EAAAhB,SAAAK,cAAA,oBACA0D,EAAA/D,SAAAK,cAAA,QAEA,IAAAkF,IAAAvE,EAAA,OACA,IAAAwE,GAAA,EACAD,EAAA1E,iBAAA,SAAA,SAAAC,GACAuC,KAAAhC,UAAAkE,OAAA,aACAvE,EAAAK,UAAAkE,OAAA,aACAC,GAAAA,EAEAzB,EAAA5C,MAAAsE,UADAD,EACA,SAEA,OAdA","file":"bundle.min.js","sourcesContent":["!( () => {\n\t/** add query param to select links */\n\tconst links = document.querySelectorAll( '.queryParam' );\n\tlinks.forEach( item => {\n\t\tconst a = item.querySelector( 'a' );\n\t\tsrc = new URL( a.href );\n\t\tsrc.searchParams.append( 'filter', 'festival' );\n\t\ta.href = src\n\n\t} )\n} )();\n\n\n!( () => {\n\n\tconst select = document.getElementById( \"event-tag-select\" );\n\tif ( !select ) return;\n\n\tselect.addEventListener( 'input', handleFilter );\n\tconst els = document.querySelectorAll( '.event--listing' );\n\tfilterOnLoad();\n\tfunction handleFilter( e ) {\n\n\t\tconst select = e.target.value;\n\n\t\tfilterItems( select )\n\n\t}\n\tfunction filterItems( select ) {\n\t\tels.forEach( item => {\n\t\t\titem.style.display = \"block\";\n\t\t\tif ( select === '' ) return;\n\t\t\tif ( !( item.classList.contains( `event-tag-${select}` ) ) )\n\t\t\t\titem.style.display = \"none\";\n\t\t} )\n\t}\n\tfunction filterOnLoad() {\n\t\tconst optionParam = new URLSearchParams( window.location.search ).get( 'filter' );\n\t\tif ( optionParam ) {\n\t\t\tconst opt = [...select.options].find( op => op.value === optionParam );\n\t\t\tif ( opt ) select.value = opt.value;\n\t\t\tfilterItems( opt.value )\n\t\t}\n\t}\n} )();","!( () => {\n\tconst mediaQuery = window.matchMedia( '(min-width: 40rem)' )\n\t// Check if the media query is true\n\tif ( mediaQuery.matches ) {\n\t\tconst masthead = document.getElementById( 'masthead' );\n\t\tconst subMenus = masthead.querySelectorAll( '.sub-menu' );\n\t\tconst mH = masthead.clientHeight;\n\t\tmasthead.style.height = `${mH}px`\n\t\tconst tallest = getTallestSubmenu( subMenus );\n\n\t\tmasthead.addEventListener( 'mouseleave', function ( e ) {\n\t\t\tmasthead.classList.remove( 'is-hovered' )\n\t\t\tthis.style.height = `${mH}px`;\n\t\t} )\n\t\tmasthead.addEventListener( 'mouseenter', function ( e ) {\n\t\t\tmasthead.classList.add( 'is-hovered' );\n\t\t\tthis.style.height = `${mH + tallest}px`;\n\t\t} )\n\t}\n\tfunction getTallestSubmenu( submenuArr ) {\n\t\treturn Array.from( submenuArr ).reduce( ( prev, itt ) => {\n\t\t\tconst x = itt.clientHeight;\n\t\t\tconst y = ( prev && prev.clientHeight ) ? prev.clientHeight : prev || 0;\n\t\t\treturn Math.max( x, y );\n\t\t} )\n\t}\n\n} )();","( () => {\n\t// mark this in sessionStorage\n\tdocument.addEventListener( 'click', handleClick );\n\tdocument.addEventListener( 'keydown', handleKeydown );\n\n\tconst popupDisplayed = sessionStorage.getItem( 'popupDisplayed' );\n\n\tconst triggers = document.querySelectorAll( '.openJoinPopup' );\n\n\tconst body = document.getElementsByTagName( 'body' )[0];\n\tconst popup = document.getElementById( 'joinPopup' );\n\tif ( !popup || !triggers.length ) return;\n\tif ( popupDisplayed !== \"true\" ) {\n\t\tsetTimeout( () => {\n\t\t\topenJoinPopup();\n\t\t}, 5000 )\n\t}\n\n\ttriggers.forEach( ( el ) => {\n\t\tel.addEventListener( 'mouseover', setupWillchange )\n\t\tel.addEventListener( 'touchstart', setupWillchange )\n\t\tel.addEventListener( 'mouseout', removeWillchange )\n\t\tel.addEventListener( 'touchmove', removeWillchange )\n\t} )\n\n\tfunction handleKeydown( e ) {\n\t\te.key === \"Escape\" ? closePopup() : null;\n\t}\n\n\tfunction setupWillchange() {\n\t\tpopup.style.willChange = \"transform, opacity\";\n\t\ttransitionEnd()\n\t}\n\tfunction removeWillchange() {\n\t\tpopup.style.willChange = \"\";\n\t}\n\n\tfunction transitionEnd() {\n\t\tpopup.addEventListener( 'transitionend', removeWillchange )\n\t}\n\n\tfunction handleClick( e ) {\n\n\t\te.target.closest( '.openJoinPopup' ) ? openJoinPopup() : null;\n\t\te.target.closest( '#background-overlay' ) ? closePopup() : null;\n\t\te.target.matches( '.popup--close-button' ) ? closePopup() : null;\n\n\t}\n\tfunction openJoinPopup() {\n\t\t// open popup\n\t\tbody.classList.add( 'overlay--is-active' )\n\t\tpopup.classList.add( 'is-active' )\n\t\tsessionStorage.setItem( \"popupDisplayed\", \"true\" );\n\n\t}\n\n\tfunction closePopup() {\n\t\tpopup.classList.remove( 'is-active' )\n\t\tbody.classList.remove( 'overlay--is-active' )\n\t}\n\tfunction getScrollbarWidth() {\n\t\treturn window.outerWidth - document.body.clientWidth;\n\t}\n\n} )();","\n!( function () {\n\twindow.addEventListener( 'click', e => { console.log( 'click', e.target, e.target.parentNode ) } )\n\tconst mediaQuery = window.matchMedia( '(min-width: 40rem)' )\n\t// Check if the media query is true\n\tif ( !mediaQuery.matches ) {\n\t\tconst siteNavigation = document.getElementById( 'site-navigation' );\n\n\t\t// Return early if the navigation doesn't exist.\n\t\tif ( !siteNavigation ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst menu = siteNavigation.getElementsByTagName( 'ul' )[0];\n\n\n\t\t// Get all the link elements within the menu.\n\t\tconst links = menu.getElementsByTagName( 'a' );\n\n\t\t// Get all the link elements with children within the menu.\n\t\tconst linksWithChildren = menu.querySelectorAll( '.menu-item-has-children > a, .page_item_has_children > a' );\n\n\t\tfor ( const link of linksWithChildren ) {\n\t\t\tlink.addEventListener( 'touchstart', toggleFocus, false );\n\t\t\tlink.addEventListener( 'click', toggleFocus, false );\n\t\t\t// link.addEventListener( 'touchstart', toggleFocus, false );\n\t\t}\n\n\t\tfunction toggleFocus( event ) {\n\t\t\tif ( this.closest( '.sub-menu' ) ) {\n\t\t\t\tconsole.log( 'inner link' )\n\t\t\t} else {\n\t\t\t\tconsole.log( 'nope' )\n\t\t\t}\n\t\t\t// if ( event.type === 'focus' || event.type === 'blur' || event.type === 'click' ) {\n\t\t\tif ( event.type === 'click' ) {\n\n\t\t\t\tlet self = this;\n\n\t\t\t\tevent.preventDefault();\n\n\n\t\t\t\t// Move up through the ancestors of the current link until we hit .nav-menu.\n\t\t\t\twhile ( !self.classList.contains( 'main-menu' ) ) {\n\t\t\t\t\tconsole.log( 'ere', self )\n\t\t\t\t\t// On li elements toggle the class .focus.\n\t\t\t\t\tif ( 'li' === self.tagName.toLowerCase() ) {\n\t\t\t\t\t\tif ( self.classList.contains( 'focus' ) ) {\n\t\t\t\t\t\t\tself.classList.remove( 'focus' );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfor ( const link of linksWithChildren ) {\n\t\t\t\t\t\t\t\tlink.parentNode.classList.remove( 'focus' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tself.classList.add( 'focus' )\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tself = self.parentNode;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( event.type === 'focus' ) {\n\t\t\t\treturn;\n\t\t\t\tconst menuItem = this.parentNode;\n\t\t\t\tevent.preventDefault();\n\t\t\t\tfor ( const link of menuItem.parentNode.children ) {\n\t\t\t\t\tif ( menuItem !== link ) {\n\t\t\t\t\t\tlink.classList.remove( 'focus' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tmenuItem.classList.toggle( 'focus' );\n\t\t\t}\n\t\t}\n\t\t// Remove the .toggled class and set aria-expanded to false when the user clicks outside the navigation.\n\t\t// document.addEventListener( 'click', function ( event ) {\n\n\t\t// \tconst isClickInside = siteNavigation.contains( event.target );\n\n\t\t// \tif ( !isClickInside ) {\n\t\t// \t\tsiteNavigation.classList.remove( 'is-active' );\n\t\t// \t\tbutton.setAttribute( 'aria-expanded', 'false' );\n\t\t// \t}\n\t\t// } );\n\t}\n} )();","( () => {\n\tconst toggle = document.querySelector( '.menu-toggle' );\n\tconst target = document.querySelector( '.main-navigation' );\n\tconst body = document.querySelector( 'body' );\n\n\tif ( !toggle || !target ) return\n\tlet isActive = false;\n\ttoggle.addEventListener( 'click', function toggleMenu( e ) {\n\t\tthis.classList.toggle( 'is-active' )\n\t\ttarget.classList.toggle( 'is-active' );\n\t\tisActive = !isActive;\n\t\tif ( isActive ) {\n\t\t\tbody.style.overflowY = 'hidden';\n\t\t} else {\n\t\t\tbody.style.overflowY = '';\n\t\t}\n\n\n\t} );\n\n} )()"]}